{% extends 'main/base.html' %}


{% block title %}
    {% if user.is_authenticated %}
        Events
    {% endif %}
{% endblock %}


{% block content %}
    <div class="container" style=" min-height: 60vh">
        <br/>
        <div style="display: flex; justify-content: center; ">

            {% if user.is_staff %}
                <a style="margin: auto" href="?organizer=True" class="waves-effect waves-light btn">Manage events</a>
            {% endif %}

            {% if user.is_authenticated %}
                <a style="margin: auto" href="?my_events=True" class="waves-effect waves-light btn">Attending Events</a>
            {% endif %}

            <a style="margin: auto" href="?" class="waves-effect waves-light btn">Upcoming events</a>
            <a style="margin: auto" href="?view_past=True" class="waves-effect waves-light btn">All events</a>
        </div>
        <br/>
      <div class="row">
        {% for event in events %}
        <div class="col s12 m6" style="min-width: 400px">
          <div class="card">
            <div class="card-image">
                <a href="{{event.get_absolute_url}}" class="waves-effect waves-light"><div style="background: url({{event.image.url}}) no-repeat center; background-size: cover; height: 270px;"> </div></a>
              <span class="card-title">{{event.name}}</span>
            </div>
            <div class="content" style="margin-left: 10px">
              <p>{{event.location}}</p>
              <p>{{event.price}},-</p>
              <p>{{event.date}}</p>
            </div>
            <div style="display: flex; flex-direction: row; width: 100%">
              <p style="font-size:70%; margin: 8px; align-self: flex-start; flex: 1">Hosted by: {{event.organizer}}</p>
              <a href="{{event.get_absolute_url}}" style="align-self: flex-end; flex: 0.4; margin: 8px;" class="btn waves-effect waves-light">Info</a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

        <ul class="pagination" style="text-align: center">
                {% if events.has_previous %}
                   <li class="waves-effect"><a href="?{% if view_past %}view_past=True&{% endif %}page=1"><i class="material-icons">first_page</i></a></li>
                   <li class="waves-effect"><a href="?{% if view_past %}view_past=True&{% endif %}page={{ events.previous_page_number }}"><i class="material-icons">chevron_left</i></a></li>
                {% else %}
                   <li class="disabled"><a href="#!"><i class="material-icons">first_page</i></a></li>
                   <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
                {% endif %}

                <li style="line-height: 28px">
                    Page {{ events.number }} of {{ events.paginator.num_pages }}
                </li>

                {% if events.has_next %}
                   <li class="waves-effect"><a href="?{% if view_past %}view_past=True&{% endif %}page={{ events.next_page_number }}"><i class="material-icons">chevron_right</i></a></li>
                   <li class="waves-effect"><a href="?{% if view_past %}view_past=True&{% endif %}page={{ events.paginator.num_pages }}"><i class="material-icons">last_page</i></a></li>
                {% else %}
                   <li class="disabled"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
                   <li class="disabled"><a href="#!"><i class="material-icons">last_page</i></a></li>
                {% endif %}
        </ul>
    </div>
{% endblock %}

